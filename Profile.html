<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Profile</title>
  </head>
  <body style="background-color: #5F4DEE">
  	<nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: #7464f0 ;box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px; font-color:red !important">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"><h1 style="color:white !important;">XI Home Page</h1></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="main.html"><b>Community Chat</b></a>
        </li><hr style="color:white">
        <li class="nav-item">
          <a class="nav-link" href="Arena_main.html"><b>Arena</b></a>
        </li><hr style="color:white">
        <li class="nav-item">
          <a class="nav-link" href="Comments.html"><b>Comments</b></a>
        </li><hr style="color:white">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#"><b>Profile</b></a>
        </li><hr style="color:white">
        <li class="nav-item">
          <a class="nav-link" href="Events.html"><b>Events</b></a>
        </li><hr style="color:white">
        <li class="nav-item">
          <a class="nav-link" id="logout"><b>Log Out</b></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <div class="container">
  <br>
  <br>
  <br>
	<div class="mt-4 p-5 rounded" style="background-color: white">

	<center><img src="" class="rounded mx-auto d-block img-thumbnail rounded-circle" alt="Noimage" id="pp"></center><hr>

<center><h3 id="name">-</h3></center><hr>
<center><h4 id="looks">Looks : -</h4></center>
<center><h4 id="trust">TrustWorthy : -</h4></center>
<center><h4 id="friend">Friendly : -</h4></center>
<center><h4 id="pet">Teachers Pet : -</h4></center>
<center><h4 id="overall">Overall : -</h4></center>

<div class="accordion accordion-flush card" id="accordionFlushExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingOne">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
        <b>Comments</b>
      </button>
    </h2>
    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body" id="comments">Just a sec.</div>
    </div>
  </div>
</div><br>

<div class="d-grid gap-2">
  <button class="btn btn-primary" type="button" id="Review"><b>Review Others Profiles</b></button><hr>
</div>
<hr><center><h3>Setting</h3></center><hr>
<p><b> change color of name: <a href="https://www.w3schools.com/colors/colors_picker.asp" target="_blank">Click here</a> select color and copy hex code(eg: #66ff33) and past it... or you can type basic colors like red blue etc.</b></p>
<p><b id = "colorchangename"> - </b><input type="text" class="form-control" id="newcolor" placeholder="#66ff33 or orange"></input></p>
<button class="btn btn-success" id="saveclr"><b>save</b></button><hr><hr>
<p><b>Change <code>Pin></code></b></p>
<input type="number" class="form-control" placeholder="Enter new pin" id="NewPin"></input><br>
<div class="d-grid gap-2">
  <button class="btn btn-danger" type="button" id="newpinsave"><b>Save</b></button>
</div><hr>
</div>

</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script type="module">
	  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
	  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js";
	  const firebaseConfig = {
		apiKey: "AIzaSyCLhgz6eHJz1h75UCzJBLpKXG3ej0m8Hpc",
		authDomain: "meme-arena-x.firebaseapp.com",
		databaseURL: "https://meme-arena-x-default-rtdb.asia-southeast1.firebasedatabase.app",
		projectId: "meme-arena-x",
		storageBucket: "meme-arena-x.appspot.com",
		messagingSenderId: "1065864797805",
		appId: "1:1065864797805:web:348583a22f09f1d2f5a964",
		measurementId: "G-5QW7K75VEE"
	  };
	  const app = initializeApp(firebaseConfig);
	  const analytics = getAnalytics(app);
	  import {getDatabase, ref, set, get}
	  from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
	  const db = getDatabase();
	  const cRef = ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/cmts");
	  document.getElementById("Review").onclick = function(){window.location.replace("Comments.html");};
	  get(cRef).then((snapshot) => {
		document.getElementById("comments").innerHTML = snapshot.val();
		});
		document.getElementById("logout").onclick = function(){	localStorage.removeItem("UsEr_Name_MemEArIna_UsEr_ApS2");
	window.location.replace("index.html");};
	//Disclamer to the person looking at this...Shit can be seen down here.

	//looks
	  get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Looks")).then((lsnapshot) => {
		var lnum = lsnapshot.val();
		if(lnum == "0" || lnum == null){document.getElementById("looks").innerHTML = ("Looks : No Review")}
		else{
			get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Looks_x")).then((lsnapshot) =>
				{
				document.getElementById("looks").innerHTML = ("Looks : "+(lnum/lsnapshot.val()).toFixed(2)+"/5")
				});
			}
		});

	//Trust
	  get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/TrustWorthy")).then((tsnapshot) => {
		var tnum = tsnapshot.val();
		if(tnum == "0" || tnum == null){document.getElementById("trust").innerHTML = ("TrustWorthy : No Review")}
		else{
			get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/TrustWorthy_x")).then((tsnapshot) =>
				{
				document.getElementById("trust").innerHTML = ("TrustWorthy : "+(tnum/tsnapshot.val()).toFixed(2)+"/5")
				});
			}
		});

	//Friend
	  get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Friendly")).then((fsnapshot) => {
		var fnum = fsnapshot.val();
		if(fnum == "0" || fnum == null){document.getElementById("friend").innerHTML = ("Friendly : No Review")}
		else{
			get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Friendly_x")).then((fsnapshot) =>
				{
				document.getElementById("friend").innerHTML = ("Friendly : "+(fnum/fsnapshot.val()).toFixed(2)+"/5")
				});
			}
		});

	//Pet
	  get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Teachers_pet")).then((psnapshot) => {
		var pnum = psnapshot.val();
		if(pnum == "0" || pnum == null){document.getElementById("pet").innerHTML = ("Teachers Pet : No Review")}
		else{
			get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Teachers_pet_x")).then((psnapshot) =>
				{
				document.getElementById("pet").innerHTML = ("Teachers Pet : "+(pnum/psnapshot.val()).toFixed(2)+"/5")
				});
			}
		});

	//Overall
	  get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Overall")).then((osnapshot) => {
		var onum = osnapshot.val();
		if(onum == "0" || onum == null){document.getElementById("overall").innerHTML = ("Overall : No Review")}
		else{
			get(ref(db, "USR_LST/" + localStorage.UsEr_Name_MemEArIna_UsEr_ApS2 + "/Overall_x")).then((osnapshot) =>
				{
				document.getElementById("overall").innerHTML = ("Overall : "+(onum/osnapshot.val()).toFixed(2)+"/5")
				});
			}
		});
    document.getElementById("newpinsave").onclick = function(){
      set(ref(db,"USR_LST/"+localStorage.UsEr_Name_MemEArIna_UsEr_ApS2+"/pin"),(document.getElementById("NewPin").value));
    };

	</script>
	<script>
		document.getElementById("pp").src = localStorage.UsEr_Name_MemEArIna_UsEr_ApS2_img;
		document.getElementById("name").innerHTML = (localStorage.UsEr_Name_MemEArIna_UsEr_ApS2);
    document.getElementById("colorchangename").innerHTML = (localStorage.UsEr_Name_MemEArIna_UsEr_ApS2+": ");
    document.getElementById("colorchangename").style = ("color:"+localStorage.UsEr_Name_MemEArIna_UsEr_ApS2_Color);
    document.getElementById("saveclr").onclick = function(){
      localStorage.UsEr_Name_MemEArIna_UsEr_ApS2_Color = document.getElementById("newcolor").value;
      document.getElementById("colorchangename").style = ("color:"+localStorage.UsEr_Name_MemEArIna_UsEr_ApS2_Color);
    };

	</script>
  </body>
</html>
